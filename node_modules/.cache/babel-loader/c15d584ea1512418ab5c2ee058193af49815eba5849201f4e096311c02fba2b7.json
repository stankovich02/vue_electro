{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"LoginComponent\",\n  data() {\n    return {\n      username: \"marko\",\n      password: \"sifra123\",\n      error: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters(['users', 'role', 'user'])\n  },\n  mounted() {\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user != null) {\n      if (user.role != \"unauthorized\") {\n        this.$router.push(\"/\");\n      }\n    }\n  },\n  methods: {\n    loginUser() {\n      this.error = \"\";\n      if (!this.username) {\n        this.error = \"Email is required.\";\n        return;\n      }\n      if (!this.password) {\n        this.error = \"Password is required.\";\n        return;\n      }\n      let loggedUser;\n      for (let u of this.users) {\n        if (u.username == this.username && u.password == this.password) {\n          loggedUser = u;\n          break;\n        }\n      }\n      if (!loggedUser) {\n        this.error = \"Wrong credentials.\";\n        return;\n      }\n      let localStorageItem = {\n        username: loggedUser.username,\n        role: loggedUser.role\n      };\n      localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\n      this.$store.commit(\"loginUser\", loggedUser);\n      if (loggedUser.role == \"admin\") {\n        this.$router.push(\"/store\");\n        return;\n      } else {\n        this.$router.push(\"/\");\n        location.reload();\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","username","password","error","computed","mounted","user","JSON","parse","localStorage","getItem","role","$router","push","methods","loginUser","loggedUser","u","users","localStorageItem","setItem","stringify","$store","commit","location","reload"],"sources":["src/components/pages/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"mx-auto w-25 py-5\">\r\n    <h1 class=\"text-center\">Login</h1>\r\n        <div class=\"mb-3 mt-5\">\r\n            <TextInput id=\"username\" label=\"Username\" placeholder=\"pera123\" v-model=\"username\"/>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <TextInput type=\"password\" label=\"Password\" placeholder=\"sifra123\" id=\"password\" v-model=\"password\"/>\r\n        </div>\r\n        <div class=\"mb-3 text-center mt-5\">\r\n            <Button buttonText=\"Login\" @wasClicked=\"loginUser\"/>\r\n        </div>\r\n        <div class=\"mx-auto\" v-if=\"error\">\r\n        <br>\r\n            <div class=\"alert alert-danger text-center\">\r\n                {{ error }}\r\n            </div>\r\n       </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { mapGetters } from \"vuex\"\r\n    export default {\r\n        name: \"LoginComponent\",\r\n        data() {\r\n            return {\r\n                username: \"marko\",\r\n                password: \"sifra123\",\r\n                error: \"\",\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters(['users', 'role', 'user'])\r\n        },\r\n        mounted() {\r\n           let user = JSON.parse(localStorage.getItem(\"user\"))\r\n           if(user != null) {\r\n                if(user.role != \"unauthorized\"){\r\n                    this.$router.push(\"/\");\r\n                }\r\n           }\r\n        },\r\n        methods: {\r\n            loginUser() {\r\n                this.error = \"\"\r\n                if(!this.username) {\r\n                    this.error = \"Email is required.\";\r\n                    return;\r\n                }\r\n                if(!this.password) {\r\n                    this.error = \"Password is required.\";\r\n                    return;\r\n                }\r\n                let loggedUser;\r\n                for(let u of this.users){\r\n                    if(u.username == this.username && u.password == this.password) {\r\n                        loggedUser = u;\r\n                        break;\r\n                    }\r\n                }\r\n                if(!loggedUser) {\r\n                    this.error = \"Wrong credentials.\"\r\n                    return;\r\n                }\r\n                let localStorageItem = {\r\n                    username : loggedUser.username,\r\n                    role : loggedUser.role\r\n                }\r\n                localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\r\n                this.$store.commit(\"loginUser\", loggedUser);\r\n                if(loggedUser.role == \"admin\"){\r\n                    this.$router.push(\"/store\");\r\n                    return;\r\n                }\r\n                else{\r\n                    this.$router.push(\"/\");\r\n                    location.reload();\r\n                }\r\n               \r\n                \r\n            }\r\n        }\r\n    }\r\n</script>"],"mappings":";AAqBA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAN,UAAA;EACA;EACAO,QAAA;IACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,IAAAJ,IAAA;MACA,IAAAA,IAAA,CAAAK,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAZ,KAAA;MACA,UAAAF,QAAA;QACA,KAAAE,KAAA;QACA;MACA;MACA,UAAAD,QAAA;QACA,KAAAC,KAAA;QACA;MACA;MACA,IAAAa,UAAA;MACA,SAAAC,CAAA,SAAAC,KAAA;QACA,IAAAD,CAAA,CAAAhB,QAAA,SAAAA,QAAA,IAAAgB,CAAA,CAAAf,QAAA,SAAAA,QAAA;UACAc,UAAA,GAAAC,CAAA;UACA;QACA;MACA;MACA,KAAAD,UAAA;QACA,KAAAb,KAAA;QACA;MACA;MACA,IAAAgB,gBAAA;QACAlB,QAAA,EAAAe,UAAA,CAAAf,QAAA;QACAU,IAAA,EAAAK,UAAA,CAAAL;MACA;MACAF,YAAA,CAAAW,OAAA,SAAAb,IAAA,CAAAc,SAAA,CAAAF,gBAAA;MACA,KAAAG,MAAA,CAAAC,MAAA,cAAAP,UAAA;MACA,IAAAA,UAAA,CAAAL,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA,OACA;QACA,KAAAD,OAAA,CAAAC,IAAA;QACAW,QAAA,CAAAC,MAAA;MACA;IAGA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}