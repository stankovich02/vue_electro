{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"LoginComponent\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      error: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters(['users', 'role', 'user'])\n  },\n  mounted() {\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user != null) {\n      if (user.role != \"unauthorized\") {\n        this.$router.push(\"/\");\n      }\n    }\n  },\n  methods: {\n    loginUser() {\n      this.error = \"\";\n      if (!this.username) {\n        this.error = \"Email is required.\";\n        return;\n      }\n      if (!this.password) {\n        this.error = \"Password is required.\";\n        return;\n      }\n      let loggedUser;\n      if (this.username = this.user.username && this.password == this.user.password) {\n        loggedUser = this.user;\n      }\n      if (!loggedUser) {\n        this.error = \"Wrong credentials.\";\n        return;\n      }\n      let localStorageItem = {\n        username: loggedUser.username,\n        role: loggedUser.role\n      };\n      localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\n      this.$router.push(\"/\");\n      location.reload();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","username","password","error","computed","mounted","user","JSON","parse","localStorage","getItem","role","$router","push","methods","loginUser","loggedUser","localStorageItem","setItem","stringify","location","reload"],"sources":["src/components/pages/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"mx-auto w-25 py-5\">\r\n    <h1 class=\"text-center\">Login</h1>\r\n        <div class=\"mb-3 mt-5\">\r\n            <label for=\"username\" class=\"form-label\">Username</label>\r\n            <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\" placeholder=\"pera123\">\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <label for=\"password\" class=\"form-label\">Password</label>\r\n            <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"sifra123\">\r\n        </div>\r\n        <div class=\"mb-3 text-center mt-5\">\r\n            <button class=\"btn btn-primary px-5 py-3 fs-3\" @click=\"loginUser\">\r\n                Login\r\n            </button>\r\n        </div>\r\n        <div class=\"col-6\" v-if=\"error\">\r\n        <br>\r\n            <div class=\"alert alert-danger\">\r\n                {{ error }}\r\n            </div>\r\n       </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { mapGetters } from \"vuex\"\r\n    export default {\r\n        name: \"LoginComponent\",\r\n        data() {\r\n            return {\r\n                username: \"\",\r\n                password: \"\",\r\n                error: \"\",\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters(['users', 'role', 'user'])\r\n        },\r\n        mounted() {\r\n           let user = JSON.parse(localStorage.getItem(\"user\"))\r\n           if(user != null) {\r\n                if(user.role != \"unauthorized\"){\r\n                    this.$router.push(\"/\");\r\n                }\r\n           }\r\n        },\r\n        methods: {\r\n            loginUser() {\r\n                this.error = \"\"\r\n                if(!this.username) {\r\n                    this.error = \"Email is required.\";\r\n                    return;\r\n                }\r\n                if(!this.password) {\r\n                    this.error = \"Password is required.\";\r\n                    return;\r\n                }\r\n                let loggedUser;\r\n                if(this.username = this.user.username && this.password == this.user.password) {\r\n                    loggedUser = this.user;\r\n                }\r\n                if(!loggedUser) {\r\n                    this.error = \"Wrong credentials.\"\r\n                    return;\r\n                }\r\n\r\n                let localStorageItem = {\r\n                    username : loggedUser.username,\r\n                    role : loggedUser.role\r\n                }\r\n                localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\r\n                this.$router.push(\"/\");\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n</script>"],"mappings":";AAyBA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAN,UAAA;EACA;EACAO,QAAA;IACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,IAAAJ,IAAA;MACA,IAAAA,IAAA,CAAAK,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAZ,KAAA;MACA,UAAAF,QAAA;QACA,KAAAE,KAAA;QACA;MACA;MACA,UAAAD,QAAA;QACA,KAAAC,KAAA;QACA;MACA;MACA,IAAAa,UAAA;MACA,SAAAf,QAAA,QAAAK,IAAA,CAAAL,QAAA,SAAAC,QAAA,SAAAI,IAAA,CAAAJ,QAAA;QACAc,UAAA,QAAAV,IAAA;MACA;MACA,KAAAU,UAAA;QACA,KAAAb,KAAA;QACA;MACA;MAEA,IAAAc,gBAAA;QACAhB,QAAA,EAAAe,UAAA,CAAAf,QAAA;QACAU,IAAA,EAAAK,UAAA,CAAAL;MACA;MACAF,YAAA,CAAAS,OAAA,SAAAX,IAAA,CAAAY,SAAA,CAAAF,gBAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;MACAO,QAAA,CAAAC,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}