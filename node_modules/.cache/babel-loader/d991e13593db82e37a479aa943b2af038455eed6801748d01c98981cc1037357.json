{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"LoginComponent\",\n  data() {\n    return {\n      username: \"marko\",\n      password: \"sifra123\",\n      error: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters(['users', 'role', 'user'])\n  },\n  mounted() {\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user.role != \"unauthorized\") {\n      this.$router.push(\"/\");\n    }\n  },\n  methods: {\n    loginUser() {\n      this.error = \"\";\n      if (!this.username) {\n        this.error = \"Email is required.\";\n        return;\n      }\n      if (!this.password) {\n        this.error = \"Password is required.\";\n        return;\n      }\n      let user;\n      for (let u of this.users) {\n        if (u.username == this.username && u.password == this.password) {\n          user = u;\n          break;\n        }\n      }\n      if (!user) {\n        this.error = \"Wrong credentials.\";\n        return;\n      }\n      let localStorageItem = {\n        username: user.username,\n        role: user.role\n      };\n      localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\n      this.$store.commit(\"changeUser\", localStorageItem);\n      this.$router.push(\"/\");\n      location.reload();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","username","password","error","computed","mounted","user","JSON","parse","localStorage","getItem","role","$router","push","methods","loginUser","u","users","localStorageItem","setItem","stringify","$store","commit","location","reload"],"sources":["src/components/pages/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"mx-auto w-25 py-5\">\r\n    <h1 class=\"text-center\">Login</h1>\r\n        <div class=\"mb-3 mt-5\">\r\n            <label for=\"username\" class=\"form-label\">Username</label>\r\n            <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\" placeholder=\"pera123\">\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <label for=\"password\" class=\"form-label\">Password</label>\r\n            <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"sifra123\">\r\n        </div>\r\n        <div class=\"mb-3 text-center mt-5\">\r\n            <button class=\"btn btn-primary px-5 py-3 fs-3\" @click=\"loginUser\">\r\n                Login\r\n            </button>\r\n        </div>\r\n        <div class=\"col-6\" v-if=\"error\">\r\n        <br>\r\n            <div class=\"alert alert-danger\">\r\n                {{ error }}\r\n            </div>\r\n       </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { mapGetters } from \"vuex\"\r\n    export default {\r\n        name: \"LoginComponent\",\r\n        data() {\r\n            return {\r\n                username: \"marko\",\r\n                password: \"sifra123\",\r\n                error: \"\",\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters(['users', 'role', 'user'])\r\n        },\r\n        mounted() {\r\n           let user = JSON.parse(localStorage.getItem(\"user\"))\r\n           if(user.role != \"unauthorized\") {\r\n               this.$router.push(\"/\");\r\n           }\r\n        },\r\n        methods: {\r\n            loginUser() {\r\n                this.error = \"\"\r\n                if(!this.username) {\r\n                    this.error = \"Email is required.\";\r\n                    return;\r\n                }\r\n                if(!this.password) {\r\n                    this.error = \"Password is required.\";\r\n                    return;\r\n                }\r\n                let user;\r\n                for(let u of this.users){\r\n                    if(u.username == this.username && u.password == this.password){\r\n                        user = u;\r\n                        break;\r\n                    }\r\n                }\r\n                if(!user) {\r\n                    this.error = \"Wrong credentials.\"\r\n                    return;\r\n                }\r\n\r\n                let localStorageItem = {\r\n                    username : user.username,\r\n                    role : user.role\r\n                }\r\n                localStorage.setItem(\"user\", JSON.stringify(localStorageItem));\r\n                this.$store.commit(\"changeUser\", localStorageItem);\r\n                this.$router.push(\"/\");\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n</script>"],"mappings":";AAyBA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAN,UAAA;EACA;EACAO,QAAA;IACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,IAAAJ,IAAA,CAAAK,IAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAZ,KAAA;MACA,UAAAF,QAAA;QACA,KAAAE,KAAA;QACA;MACA;MACA,UAAAD,QAAA;QACA,KAAAC,KAAA;QACA;MACA;MACA,IAAAG,IAAA;MACA,SAAAU,CAAA,SAAAC,KAAA;QACA,IAAAD,CAAA,CAAAf,QAAA,SAAAA,QAAA,IAAAe,CAAA,CAAAd,QAAA,SAAAA,QAAA;UACAI,IAAA,GAAAU,CAAA;UACA;QACA;MACA;MACA,KAAAV,IAAA;QACA,KAAAH,KAAA;QACA;MACA;MAEA,IAAAe,gBAAA;QACAjB,QAAA,EAAAK,IAAA,CAAAL,QAAA;QACAU,IAAA,EAAAL,IAAA,CAAAK;MACA;MACAF,YAAA,CAAAU,OAAA,SAAAZ,IAAA,CAAAa,SAAA,CAAAF,gBAAA;MACA,KAAAG,MAAA,CAAAC,MAAA,eAAAJ,gBAAA;MACA,KAAAN,OAAA,CAAAC,IAAA;MACAU,QAAA,CAAAC,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}