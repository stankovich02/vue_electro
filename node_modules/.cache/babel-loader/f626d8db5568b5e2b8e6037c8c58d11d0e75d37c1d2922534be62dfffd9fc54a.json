{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  data() {\n    return {\n      table: this.$route.params.table,\n      pagedProducts: [],\n      categories: [],\n      brands: [],\n      viewpage: 1,\n      perPage: 10\n    };\n  },\n  name: \"AdminComponent\",\n  computed: {\n    ...mapGetters([\"products\"])\n  },\n  mounted() {\n    let user = JSON.parse(localStorage.getItem('user'));\n    if (user == null) {\n      this.$router.push('/login');\n    }\n    if (user.role != \"admin\") {\n      this.$router.push('/');\n    }\n    var that = this;\n    this.$axios.get(\"models/getDataForID.php?table=brand&getData=true\").then(response => {\n      that.brands = response.data;\n    }).catch(error => {\n      console.log(error);\n    });\n    this.$axios.get(\"models/getDataForID.php?table=category&getData=true\").then(response => {\n      that.categories = response.data;\n    }).catch(error => {\n      console.log(error);\n    });\n    this.makePagination();\n    let paginations = document.querySelectorAll('.store-pagination li');\n    paginations.forEach(pagination => {\n      pagination.addEventListener('click', () => {\n        this.viewpage = pagination.textContent;\n        this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage);\n      });\n    });\n    this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage);\n  },\n  methods: {\n    makePagination() {\n      let html = '';\n      let numOfPages = Math.ceil(this.products.length / 10);\n      for (let i = 1; i <= numOfPages; i++) {\n        html += `<li class=\"pagination\"><a href=\"#\">${i}</a></li>`;\n      }\n      document.querySelector('.store-pagination').innerHTML = html;\n      let paginations = document.querySelectorAll('.store-pagination li');\n      paginations.forEach(pagination => {\n        pagination.addEventListener('click', () => {\n          this.viewpage = pagination.textContent;\n        });\n      });\n    },\n    returnImgSrc(src) {\n      return src + '_small.png';\n    },\n    returnCatName(id) {\n      for (let c of this.categories) {\n        if (c.category_id == id) {\n          return c.category_name;\n        }\n      }\n    },\n    returnStock(stock) {\n      if (stock == 1) {\n        return \"In stock\";\n      } else {\n        return \"Out of stock\";\n      }\n    },\n    returnBrandName(id) {\n      for (let b of this.brands) {\n        if (b.brand_id == id) {\n          return b.brand_name;\n        }\n      }\n    },\n    editProduct: function (id) {\n      this.$router.push(\"/edit-product/\" + id);\n    },\n    deleteProduct: function (id) {\n      this.$store.commit(\"deleteProduct\", id);\n    }\n  },\n  watch: {\n    products() {\n      // this.viewpage = 1;\n      if (!this.products.length % 10) {\n        this.viewpage = this.viewpage - 1;\n      }\n      this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage);\n      this.makePagination();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","data","table","$route","params","pagedProducts","categories","brands","viewpage","perPage","name","computed","mounted","user","JSON","parse","localStorage","getItem","$router","push","role","that","$axios","get","then","response","catch","error","console","log","makePagination","paginations","document","querySelectorAll","forEach","pagination","addEventListener","textContent","products","slice","methods","html","numOfPages","Math","ceil","length","i","querySelector","innerHTML","returnImgSrc","src","returnCatName","id","c","category_id","category_name","returnStock","stock","returnBrandName","b","brand_id","brand_name","editProduct","deleteProduct","$store","commit","watch"],"sources":["src/components/pages/Admin.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <h1 class=\"text-center mt-5\">{{table.toUpperCase()}}</h1>\r\n        <router-link to=\"/insert-product\"><a class=\"btn btn-primary mt-auto my-5\">Add new product</a></router-link>\r\n        <table class=\"table table-bordered\">\r\n            <thead class=\"thead-dark\">\r\n                <th>Id</th>\r\n                <th>Name</th>\r\n                <th>Price</th>\r\n                <th>Discount(%)</th>\r\n                <th>Brand</th>\r\n                <th>Category</th>\r\n                <th>Image</th>\r\n                <th>Stock</th>\r\n                <th>Edit</th>\r\n                <th>Delete</th>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"p of pagedProducts\" :key=\"p.product_id\">\r\n                    <td>{{p.product_id}}</td>\r\n                    <td>{{p.name}}</td>\r\n                    <td>{{p.price}}</td>\r\n                    <td>{{p.discount_percent}}</td>\r\n                    <td>{{returnBrandName(p.brand_id)}}</td>\r\n                    <td>{{returnCatName(p.category_id)}}</td>\r\n                    <td><img :src=\"returnImgSrc(p.image_src)\" :alt=\"p.name\" class=\"pictureTable\"></td>\r\n                    <td>{{returnStock(p.in_stock)}}</td>\r\n                    <td><button class=\"btn btn-primary\" @click=\"editProduct(p.product_id)\">Edit</button></td>\r\n                    <td><button class=\"btn btn-danger\" @click=\"deleteProduct(p.product_id)\">Delete</button></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <ul class=\"store-pagination\">\r\n\t\t</ul>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport {mapGetters} from 'vuex';\r\n    export default{\r\n        data() {\r\n        return {\r\n            table : this.$route.params.table,\r\n            pagedProducts: [],\r\n            categories: [],\r\n            brands: [],\r\n            viewpage: 1,\r\n            perPage: 10\r\n        }\r\n    },\r\n        name:\"AdminComponent\",\r\n        computed:{\r\n            ...mapGetters([\"products\"])\r\n        },\r\n        mounted(){\r\n            let user = JSON.parse(localStorage.getItem('user'));\r\n            if(user == null){\r\n                this.$router.push('/login');\r\n            }\r\n            if(user.role != \"admin\"){\r\n                    this.$router.push('/');\r\n            }\r\n            var that = this;\r\n            this.$axios.get(\"models/getDataForID.php?table=brand&getData=true\").then(response => {\r\n                that.brands = response.data;\r\n            }).catch(error => {\r\n                console.log(error);\r\n            });\r\n            this.$axios.get(\"models/getDataForID.php?table=category&getData=true\").then(response => {\r\n                that.categories = response.data;\r\n            }).catch(error => {\r\n                console.log(error);\r\n            });\r\n            this.makePagination();\r\n            let paginations = document.querySelectorAll('.store-pagination li');\r\n            paginations.forEach(pagination => {\r\n                pagination.addEventListener('click', () => {\r\n                    this.viewpage = pagination.textContent;\r\n                    this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage)\r\n                })\r\n            })\r\n            this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage)\r\n        },\r\n        methods:{\r\n            makePagination(){\r\n\t\t\tlet html = '';\r\n\t\t\tlet numOfPages = Math.ceil(this.products.length / 10);\r\n\t\t\tfor(let i = 1; i <= numOfPages; i++){\r\n\t\t\t\thtml += `<li class=\"pagination\"><a href=\"#\">${i}</a></li>`;\r\n\t\t\t}\r\n\t\t\tdocument.querySelector('.store-pagination').innerHTML = html;\r\n\t\t\tlet paginations = document.querySelectorAll('.store-pagination li');\r\n\t\t\tpaginations.forEach(pagination => {\r\n\t\t\t\tpagination.addEventListener('click', () => {\r\n\t\t\t\t\tthis.viewpage = pagination.textContent;\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t    },\r\n            returnImgSrc(src){\r\n\t\t\treturn src + '_small.png';\r\n\t\t    },\r\n            returnCatName(id){\r\n                for(let c of this.categories){\r\n                    if(c.category_id == id){\r\n                        return c.category_name;\r\n                    }\r\n                }\r\n            },\r\n            returnStock(stock){\r\n                if(stock == 1){\r\n                    return \"In stock\";\r\n                }\r\n                else{\r\n                    return \"Out of stock\";\r\n                }\r\n            },\r\n            returnBrandName(id){\r\n                for(let b of this.brands){\r\n                    if(b.brand_id == id){\r\n                        return b.brand_name;\r\n                    }\r\n                }\r\n            },\r\n            editProduct: function(id) {\r\n\t\t\t    this.$router.push(\"/edit-product/\" + id)\r\n            },\r\n            deleteProduct: function(id){\r\n                this.$store.commit(\"deleteProduct\", id)\r\n            }       \r\n        },\r\n        watch:{\r\n            products(){\r\n                // this.viewpage = 1;\r\n                if(!this.products.length % 10){\r\n                    this.viewpage = this.viewpage - 1;\r\n                }\r\n                this.pagedProducts = this.products.slice((this.viewpage - 1) * this.perPage, this.viewpage * this.perPage)\r\n                this.makePagination()\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n.pictureTable{\r\n    width: 100px;\r\n}\r\ntable th{\r\n    text-align: center;\r\n    padding: 10px 0px;\r\n}\r\ntd{\r\n    vertical-align: middle!important;\r\n    text-align: center;\r\n}\r\n</style>"],"mappings":";AAsCA,SAAAA,UAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAF,KAAA;MACAG,aAAA;MACAC,UAAA;MACAC,MAAA;MACAC,QAAA;MACAC,OAAA;IACA;EACA;EACAC,IAAA;EACAC,QAAA;IACA,GAAAX,UAAA;EACA;EACAY,QAAA;IACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,IAAAJ,IAAA;MACA,KAAAK,OAAA,CAAAC,IAAA;IACA;IACA,IAAAN,IAAA,CAAAO,IAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;IACA,IAAAE,IAAA;IACA,KAAAC,MAAA,CAAAC,GAAA,qDAAAC,IAAA,CAAAC,QAAA;MACAJ,IAAA,CAAAd,MAAA,GAAAkB,QAAA,CAAAxB,IAAA;IACA,GAAAyB,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;IACA;IACA,KAAAL,MAAA,CAAAC,GAAA,wDAAAC,IAAA,CAAAC,QAAA;MACAJ,IAAA,CAAAf,UAAA,GAAAmB,QAAA,CAAAxB,IAAA;IACA,GAAAyB,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;IACA;IACA,KAAAG,cAAA;IACA,IAAAC,WAAA,GAAAC,QAAA,CAAAC,gBAAA;IACAF,WAAA,CAAAG,OAAA,CAAAC,UAAA;MACAA,UAAA,CAAAC,gBAAA;QACA,KAAA5B,QAAA,GAAA2B,UAAA,CAAAE,WAAA;QACA,KAAAhC,aAAA,QAAAiC,QAAA,CAAAC,KAAA,OAAA/B,QAAA,aAAAC,OAAA,OAAAD,QAAA,QAAAC,OAAA;MACA;IACA;IACA,KAAAJ,aAAA,QAAAiC,QAAA,CAAAC,KAAA,OAAA/B,QAAA,aAAAC,OAAA,OAAAD,QAAA,QAAAC,OAAA;EACA;EACA+B,OAAA;IACAV,eAAA;MACA,IAAAW,IAAA;MACA,IAAAC,UAAA,GAAAC,IAAA,CAAAC,IAAA,MAAAN,QAAA,CAAAO,MAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,IAAAJ,UAAA,EAAAI,CAAA;QACAL,IAAA,0CAAAK,CAAA;MACA;MACAd,QAAA,CAAAe,aAAA,sBAAAC,SAAA,GAAAP,IAAA;MACA,IAAAV,WAAA,GAAAC,QAAA,CAAAC,gBAAA;MACAF,WAAA,CAAAG,OAAA,CAAAC,UAAA;QACAA,UAAA,CAAAC,gBAAA;UACA,KAAA5B,QAAA,GAAA2B,UAAA,CAAAE,WAAA;QACA;MACA;IACA;IACAY,aAAAC,GAAA;MACA,OAAAA,GAAA;IACA;IACAC,cAAAC,EAAA;MACA,SAAAC,CAAA,SAAA/C,UAAA;QACA,IAAA+C,CAAA,CAAAC,WAAA,IAAAF,EAAA;UACA,OAAAC,CAAA,CAAAE,aAAA;QACA;MACA;IACA;IACAC,YAAAC,KAAA;MACA,IAAAA,KAAA;QACA;MACA,OACA;QACA;MACA;IACA;IACAC,gBAAAN,EAAA;MACA,SAAAO,CAAA,SAAApD,MAAA;QACA,IAAAoD,CAAA,CAAAC,QAAA,IAAAR,EAAA;UACA,OAAAO,CAAA,CAAAE,UAAA;QACA;MACA;IACA;IACAC,WAAA,WAAAA,CAAAV,EAAA;MACA,KAAAlC,OAAA,CAAAC,IAAA,oBAAAiC,EAAA;IACA;IACAW,aAAA,WAAAA,CAAAX,EAAA;MACA,KAAAY,MAAA,CAAAC,MAAA,kBAAAb,EAAA;IACA;EACA;EACAc,KAAA;IACA5B,SAAA;MACA;MACA,UAAAA,QAAA,CAAAO,MAAA;QACA,KAAArC,QAAA,QAAAA,QAAA;MACA;MACA,KAAAH,aAAA,QAAAiC,QAAA,CAAAC,KAAA,OAAA/B,QAAA,aAAAC,OAAA,OAAAD,QAAA,QAAAC,OAAA;MACA,KAAAqB,cAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}